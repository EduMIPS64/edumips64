<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <title>EduMIPS64 Experimental Web Frontend</title>
      <link rel="stylesheet" media="screen" type="text/css" href="style.css">
      <link rel="icon" type="image/png" href="favicon.png">

       <!-- Materialize.CSS -->
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
      <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
      <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>

      <!-- JS libraries: Require, React, Babel (for JSX). -->
      <script src="https://unpkg.com/react@16/umd/react.development.js" crossorigin></script>
      <script src="https://unpkg.com/react-dom@16/umd/react-dom.development.js" crossorigin></script>
      <script src="https://unpkg.com/@babel/standalone@7.9.6/babel.min.js"></script>

      <!-- JS initialization code -->
      <script type="text/javascript" language="javascript">
        // Append a random query parameter to all require requests, to bypass caches.
        // Do it only if it's not localhost, because GWT dev mode is not happy about those extra parameters.
        if (location.hostname !== "localhost" && location.hostname !== "127.0.0.1") {
          require.config({
            urlArgs: "foo=" + (new Date()).getTime()
          });
        }

        // Import the GWT JS code.
        let edu64 = new Worker("worker.js");
        edu64.postMessage("yo");
        edu64.addEventListener("message", (e) => {
          console.log("Got message from worker: ", e);
        })

        // Initialization code for Materialize.
        document.addEventListener('DOMContentLoaded', () => {
          let elems = document.querySelectorAll('.modal');
          M.Modal.init(elems);
        });
      </script>

      <!-- Import the React UI code. This is pre-processed in-browser (JSX -> JS) using Babel. -->
      <script type="text/babel" src="ui.js" ></script>

    </script>
  </head>
  <body>
     <nav>
      <div class="nav-wrapper blue lighten-2">
        <a href="#" class="brand-logo">
          <img id="logo" alt='EduMIPS64' src='logo.png' class="responsive-img"/>
          </a>
        <ul id="nav-mobile" class="right hide-on-med-and-down">
          <li><a class="waves-effect waves-light btn modal-trigger" href="#aboutmodal">About</a></li>
          <li><a href="https://github.com/EduMIPS64/edumips64/tree/master/src/main/java/org/edumips64/client">Code on GitHub</a></li>
        </ul>
      </div>
    </nav>
    <noscript>
      <div id="nojs">
        Your web browser must have JavaScript enabled
        in order for this application to display correctly.
      </div>
    </noscript>

    <!-- React mount node. -->
    <div id="simulator">
    </div>

    <!-- About modal dialog. -->
    <div id="aboutmodal" class="modal">
      <div class="modal-content">
        <h4><img src='logo.png' /></h4>
        <p>This is the web version of the <a href="https://www.edumips.org">EduMIPS64 CPU simulator</a>.</p>
        <p>This is currently <strong>work-in-progress</strong>, very early stages and not fully functional.</p>
        <p>The core of the simulator is cross-compiled from Java to JavaScript, and the UI is developed with React.</p>
        <p>If you are interested in the evolution of this web application or want to contribute to it, please get in touch via GitHub!</p>
      </div>
      <div class="modal-footer">
        <a href="#!" class="modal-close waves-effect waves-green btn-flat">Close</a>
      </div>
    </div>
  </body>
</html>
